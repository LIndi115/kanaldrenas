<!DOCTYPE html>
<html lang="sq">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KANAL DRENAS</title>
    
    <link rel="preconnect" href="https://www.gstatic.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">

    <style>
        :root { --kuqe: #a51d2d; --zi: #1a1a1a; --sfond: #f8f9fa; }
        
        /* SHPEJTËSIA: Sfondi i menjëhershëm që të mos "dridhet" faqja */
        body { 
            background: var(--sfond); 
            color: #333; 
            font-family: system-ui, -apple-system, sans-serif; 
            margin: 0; 
            display: block; 
        }

        header { background: #fff; padding: 15px; text-align: center; border-bottom: 4px solid var(--kuqe); box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .logo { text-decoration: none; color: var(--zi); font-size: 24px; font-weight: 900; text-transform: uppercase; }
        .logo span { color: var(--kuqe); }

        .container { max-width: 800px; margin: 20px auto; padding: 20px; background: #fff; border-radius: 8px; min-height: 400px; }
        
        /* Skeleton loading: Një efekt gri derisa të vijnë të dhënat */
        .loading-placeholder { background: #eee; height: 20px; margin-bottom: 10px; border-radius: 4px; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }

        h1 { font-size: 28px; line-height: 1.2; margin-top: 0; }
        .lajmi-foto { width: 100%; border-radius: 6px; display: none; margin: 20px 0; }
        .content { font-size: 18px; line-height: 1.7; white-space: pre-line; }
        
        .btn-back { display: inline-block; margin-top: 20px; color: var(--kuqe); text-decoration: none; font-weight: bold; font-size: 14px; }
        footer { text-align: center; padding: 30px; color: #999; font-size: 12px; }
    </style>

    <script defer src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
</head>
<body>

    <header>
        <a href="index.html" class="logo">KANAL <span>DRENAS</span></a>
    </header>

    <div class="container">
        <div id="skeleton">
            <div class="loading-placeholder" style="width: 40%;"></div>
            <div class="loading-placeholder" style="width: 100%; height: 40px;"></div>
            <div class="loading-placeholder" style="width: 100%; height: 200px;"></div>
        </div>

        <div id="lajmi-content" style="display:none;">
            <span id="kat" style="color:var(--kuqe); font-weight:bold; font-size:12px; text-transform:uppercase;"></span>
            <h1 id="titulli"></h1>
            <p id="meta" style="font-size:13px; color:#888;"></p>
            <img id="foto" class="lajmi-foto" alt="Imazhi i lajmit">
            <div id="pershkrimi" class="content"></div>
            <div id="video-box" style="margin-top:20px;"></div>
            <a href="index.html" class="btn-back">← KTHEHU</a>
        </div>
    </div>

    <footer>&copy; 2026 KANAL DRENAS</footer>

    <script>
        // Funksioni që ekzekutohet vetëm pasi faqja është gati
        window.onload = function() {
            const firebaseConfig = {
                apiKey: "AIzaSyBh_7BwfNbKbscPSW1ZN9Y_UvAntsjl9Wg",
                authDomain: "herolind-6ca5f.firebaseapp.com",
                databaseURL: "https://herolind-6ca5f-default-rtdb.europe-west1.firebasedatabase.app",
                projectId: "herolind-6ca5f",
                storageBucket: "herolind-6ca5f.appspot.com",
                messagingSenderId: "893085364638",
                appId: "1:893085364638:web:2db59e6ec72ad7e7c1a68f"
            };

            if (!firebase.apps.length) {
                firebase.initializeApp(firebaseConfig);
            }

            const urlParams = new URLSearchParams(window.location.search);
            const id = urlParams.get('id');

            if (id) {
                firebase.database().ref('lajmet/' + id).once('value').then((snap) => {
                    const data = snap.val();
                    if (data) {
                        document.getElementById('skeleton').style.display = "none";
                        document.getElementById('lajmi-content').style.display = "block";
                        
                        document.getElementById('titulli').innerText = data.titulli;
                        document.getElementById('kat').innerText = data.kategoria;
                        document.getElementById('pershkrimi').innerText = data.pershkrimi;
                        document.title = data.titulli;

                        if (data.foto) {
                            const img = document.getElementById('foto');
                            img.src = data.foto;
                            img.style.display = "block";
                        }
                        
                        document.getElementById('meta').innerText = `Nga: ${data.autor || 'Redaksia'} | ${new Date(data.data).toLocaleDateString('sq-AL')}`;
                    }
                });
            }
        };
    </script>
</body>
</html>
