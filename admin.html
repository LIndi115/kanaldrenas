<!DOCTYPE html>
<html lang="sq">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel | KANAL DRENAS</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    
    <style>
        :root { 
            --kuqe: #a51d2d; 
            --kuqe-hover: #801622;
            --zi: #121212; 
            --bardhe: #ffffff;
            --gri-lehte: #f4f7f6;
        }

        body { 
            font-family: 'Segoe UI', Roboto, sans-serif; 
            background-color: var(--gri-lehte); 
            margin: 0; 
            overflow-x: hidden;
        }

        /* --- LOGIN DESIGN MODERN --- */
        #login-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, var(--zi) 0%, #2c3e50 100%);
            display: flex; align-items: center; justify-content: center;
            z-index: 10000;
        }

        .login-card {
            background: var(--bardhe);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            width: 100%;
            max-width: 380px;
            text-align: center;
            border-top: 5px solid var(--kuqe);
        }

        .login-card h2 {
            margin: 0 0 10px 0;
            color: var(--zi);
            font-size: 24px;
            text-transform: uppercase;
            font-weight: 900;
        }

        .login-card p {
            color: #777;
            font-size: 14px;
            margin-bottom: 30px;
        }

        .input-group {
            text-align: left;
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            font-size: 12px;
            font-weight: bold;
            color: var(--zi);
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #eee;
            border-radius: 8px;
            font-size: 15px;
            box-sizing: border-box;
            transition: 0.3s;
        }

        .input-group input:focus {
            border-color: var(--kuqe);
            outline: none;
            background: #fffdfd;
        }

        .btn-login {
            width: 100%;
            padding: 15px;
            background: var(--kuqe);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-login:hover {
            background: var(--kuqe-hover);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(165, 29, 45, 0.3);
        }

        #errorMsg {
            color: #d93025;
            font-size: 13px;
            margin-top: 15px;
            display: none;
            font-weight: bold;
        }

        /* --- ADMIN PANEL STYLE --- */
        #admin-content { display: none; padding: 20px; }
        .container { 
            max-width: 1100px; margin: 30px auto; background: white; 
            padding: 30px; border-radius: 12px; box-shadow: 0 5px 25px rgba(0,0,0,0.05);
            border-top: 6px solid var(--kuqe);
        }
        
        .header-panel { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #eee; padding-bottom: 20px; margin-bottom: 30px; }
        .header-panel h1 { margin: 0; font-size: 22px; text-transform: uppercase; }
        .header-panel h1 span { color: var(--kuqe); }
        .btn-logout { background: #eee; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; font-weight: bold; color: #555; }

        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .full { grid-column: span 2; }
        
        label.field-label { display: block; margin-bottom: 8px; font-weight: bold; font-size: 13px; color: #444; }
        .form-control { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }

        .btn-post { background: var(--kuqe); color: white; padding: 18px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; width: 100%; font-size: 16px; margin-top: 25px; text-transform: uppercase; }

        .table-section { margin-top: 50px; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { padding: 15px; border-bottom: 1px solid #eee; text-align: left; }
        th { color: var(--kuqe); text-transform: uppercase; font-size: 12px; }
        .btn-delete { background: #ff4d4d; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; }
    </style>
</head>
<body>

<div id="login-overlay">
    <div class="login-card">
        <h2>KANAL <span>DRENAS</span></h2>
        <p>Hyrja në Sistemin e Administrimit</p>
        
        <div class="input-group">
            <label>Emri i Përdoruesit</label>
            <input type="text" id="userInput" placeholder="p.sh. admin">
        </div>

        <div class="input-group">
            <label>Fjalëkalimi</label>
            <input type="password" id="passInput" placeholder="••••••••">
        </div>

        <button class="btn-login" onclick="kyqu()">Hyr në Panel</button>
        <div id="errorMsg">Të dhënat janë të gabuara!</div>
    </div>
</div>

<div id="admin-content">
    <div class="container">
        <div class="header-panel">
            <h1>KANAL <span>DRENAS</span> | ADMIN</h1>
            <button class="btn-logout" onclick="dil()">DIL</button>
        </div>

        <div class="form-grid">
            <div class="full">
                <label class="field-label">Titulli i Lajmit</label>
                <input type="text" id="title" class="form-control" placeholder="Shkruaj titullin...">
            </div>
            <div>
                <label class="field-label">Foto (URL ose File)</label>
                <input type="text" id="mediaURL" class="form-control" placeholder="https://...">
            </div>
            <div>
                <label class="field-label">Kategoria</label>
                <select id="category" class="form-control">
                    <option value="KRYESORE">Kryesore</option>
                    <option value="DRENICA">Drenica</option>
                    <option value="SPORT">Sport</option>
                    <option value="SHOWBIZ">Showbiz</option>
                </select>
            </div>
            <div class="full">
                <label class="field-label">Përmbajtja e Lajmit</label>
                <textarea id="content" class="form-control" rows="6" placeholder="Shkruaj lajmin e plotë..."></textarea>
            </div>
        </div>

        <button class="btn-post" onclick="pergatitLajmin()">Publiko Lajmin Tani</button>

        <div class="table-section">
            <h3>Lajmet e fundit</h3>
            <table>
                <thead>
                    <tr>
                        <th>Titulli</th>
                        <th>Kategoria</th>
                        <th>Veprimi</th>
                    </tr>
                </thead>
                <tbody id="listaLajmeve"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
    // Konfigurimi i Firebase
    const firebaseConfig = {
        apiKey: "AIzaSyBh_7BwfNbKbscPSW1ZN9Y_UvAntsjl9Wg",
        authDomain: "herolind-6ca5f.firebaseapp.com",
        databaseURL: "https://herolind-6ca5f-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "herolind-6ca5f",
        storageBucket: "herolind-6ca5f.appspot.com",
        messagingSenderId: "893085364638",
        appId: "1:893085364638:web:2db59e6ec72ad7e7c1a68f"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // --- LOGJIKA E KYÇJES ---
    const USER_REALE = "admin";
    const PASS_REALE = "drenas2026";

    function kyqu() {
        const u = document.getElementById('userInput').value;
        const p = document.getElementById('passInput').value;
        const error = document.getElementById('errorMsg');

        if(u === USER_REALE && p === PASS_REALE) {
            document.getElementById('login-overlay').style.display = "none";
            document.getElementById('admin-content').style.display = "block";
            sessionStorage.setItem("kycur", "po");
        } else {
            error.style.display = "block";
            setTimeout(() => { error.style.display = "none"; }, 3000);
        }
    }

    // Mbaje kyçur nëse bën refresh
    if(sessionStorage.getItem("kycur") === "po") {
        document.getElementById('login-overlay').style.display = "none";
        document.getElementById('admin-content').style.display = "block";
    }

    function dil() {
        sessionStorage.clear();
        location.reload();
    }

    // --- FUNKSIONET E DATABASE ---
    db.ref('lajmet').on('value', (snap) => {
        const lista = document.getElementById('listaLajmeve');
        lista.innerHTML = "";
        snap.forEach((child) => {
            const l = child.val();
            lista.innerHTML = `
                <tr>
                    <td>${l.titulli}</td>
                    <td><b>${l.kategoria}</b></td>
                    <td><button class="btn-delete" onclick="fshij('${child.key}')">Fshij</button></td>
                </tr>
            ` + lista.innerHTML;
        });
    });

    function pergatitLajmin() {
        const t = document.getElementById('title').value;
        const c = document.getElementById('content').value;
        const k = document.getElementById('category').value;
        const f = document.getElementById('mediaURL').value;

        if(!t || !c) { alert("Plotësoni fushat!"); return; }

        db.ref('lajmet').push({
            titulli: t,
            pershkrimi: c,
            kategoria: k,
            foto: f || "https://via.placeholder.com/400x250",
            data: new Date().toISOString()
        }).then(() => {
            alert("U publikua!");
            location.reload();
        });
    }

    function fshij(id) {
        if(confirm("Ta fshijmë këtë lajm?")) db.ref('lajmet/' + id).remove();
    }
</script>
</body>
</html>
