<!DOCTYPE html>
<html lang="sq">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kanal Drenas - Admin Panel (Pro)</title>
    <style>
        body { font-family: 'Arial', sans-serif; background-color: #000; color: white; margin: 0; padding: 20px; }
        .container { max-width: 1000px; margin: auto; background: #111; padding: 25px; border-radius: 12px; border: 2px solid #ffcc00; box-shadow: 0 0 20px rgba(255, 204, 0, 0.4); }
        h2 { text-align: center; color: #ffcc00; text-transform: uppercase; letter-spacing: 3px; margin-bottom: 30px; border-bottom: 2px solid #ffcc00; padding-bottom: 10px; }
        
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .full-width { grid-column: span 2; }
        
        label { display: block; margin-bottom: 8px; font-weight: bold; color: #ffcc00; font-size: 14px; }
        input, select, textarea { width: 100%; padding: 12px; border-radius: 6px; border: 1px solid #333; background: #222; color: white; box-sizing: border-box; font-size: 15px; }
        input[type="file"] { padding: 8px; background: #333; border: 1px dashed #ffcc00; cursor: pointer; }

        .btn-post { background: #ffcc00; color: black; padding: 18px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; width: 100%; font-size: 18px; margin-top: 20px; text-transform: uppercase; transition: 0.3s; }
        .btn-post:hover { background: #ffd633; transform: translateY(-2px); }

        .admin-header { display: flex; justify-content: space-between; align-items: center; margin-top: 60px; padding: 15px; background: #222; border-radius: 8px 8px 0 0; border-bottom: 2px solid #ffcc00; }
        .search-area input { width: 280px; background: white; color: black; font-weight: bold; border-radius: 4px; padding: 10px; border:none; }
        
        table { width: 100%; border-collapse: collapse; background: #1a1a1a; margin-bottom: 50px; }
        th, td { padding: 15px; border-bottom: 1px solid #333; text-align: left; }
        th { color: #ffcc00; text-transform: uppercase; }
        
        .btn-shlyej { background: #ff3333; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer; font-weight: bold; }
        .preview-media { width: 60px; height: 40px; object-fit: cover; border-radius: 4px; }
    </style>
</head>
<body>

<div class="container">
    <h2>ADMIN PANEL - KANAL DRENAS</h2>

    <div class="form-grid">
        <div class="full-width">
            <label>Titulli i Lajmit</label>
            <input type="text" id="title" placeholder="Shkruaj titullin kryesor...">
        </div>
        
        <div>
            <label>Ngarko Foto ose Video (Nga pajisja)</label>
            <input type="file" id="mediaFile" accept="image/*,video/*">
        </div>
        
        <div>
            <label>Autori (Gazetari)</label>
            <input type="text" id="author" placeholder="Emri i publikuesit...">
        </div>

        <div>
            <label>Kategoria</label>
            <select id="category">
                <option value="DRENICA">DRENICA</option>
                <option value="SPORT">SPORT</option>
                <option value="SHOWBIZ">SHOWBIZ</option>
                <option value="DIASPORA">DIASPORA</option>
            </select>
        </div>

        <div class="full-width">
            <label>PÃ«rmbajtja e Lajmit</label>
            <textarea id="content" rows="6" placeholder="Shkruaj tekstin e plotÃ« tÃ« lajmit..."></textarea>
        </div>
    </div>

    <button class="btn-post" onclick="publikoLajmin()">PUBLIKO LAJMIN TANI</button>

    <div class="admin-header">
        <h3 style="margin:0;">MENAXHIMI I LAJMEVE</h3>
        <div class="search-area">
            <input type="text" id="searchInput" onkeyup="searchFunction()" placeholder="KÃ«rko titullin...">
        </div>
    </div>

    <table>
        <thead>
            <tr>
                <th>Media</th>
                <th>Titulli</th>
                <th>Kategoria</th>
                <th>Veprimi</th>
            </tr>
        </thead>
        <tbody id="listaLajmeve"></tbody>
    </table>
</div>

<script>
    window.onload = shfaqLajmet;

    function publikoLajmin() {
        const title = document.getElementById('title').value;
        const author = document.getElementById('author').value;
        const category = document.getElementById('category').value;
        const content = document.getElementById('content').value;
        const fileInput = document.getElementById('mediaFile');
        const file = fileInput.files[0];

        if(!title || !author) {
            alert("Ju lutem plotÃ«soni Titullin dhe Autorin!");
            return;
        }

        // NÃ«se ka fajll (foto/video), e kthejmÃ« nÃ« Base64 qÃ« ta ruajmÃ«
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                saveToStorage(title, author, category, content, e.target.result, file.type);
            };
            reader.readAsDataURL(file);
        } else {
            saveToStorage(title, author, category, content, 'https://via.placeholder.com/800x450?text=KANAL+DRENAS', 'image/png');
        }
    }

    function saveToStorage(title, author, category, content, mediaData, mediaType) {
        const lajmiRi = {
            id: Date.now(),
            titulli: title,
            autori: author,
            kategoria: category,
            teksti: content,
            media: mediaData,
            tipi: mediaType
        };

        let arkiva = JSON.parse(localStorage.getItem('lajmetDrenas')) || [];
        arkiva.unshift(lajmiRi);
        localStorage.setItem('lajmetDrenas', JSON.stringify(arkiva));

        alert("Lajmi u publikua me sukses!");
        location.reload(); // Rifresko faqen pÃ«r tÃ« pastruar fushave
    }

    function shfaqLajmet() {
        const arkiva = JSON.parse(localStorage.getItem('lajmetDrenas')) || [];
        const lista = document.getElementById('listaLajmeve');
        lista.innerHTML = "";

        arkiva.forEach(l => {
            let mediaPreview = l.tipi.includes('video') ? 'ðŸŽ¥ Video' : `<img src="${l.media}" class="preview-media">`;
            const rreshti = lista.insertRow();
            rreshti.innerHTML = `
                <td>${mediaPreview}</td>
                <td><strong>${l.titulli}</strong></td>
                <td>${l.kategoria}</td>
                <td><button class="btn-shlyej" onclick="shlyejLajmin(${l.id})">SHLYEJ</button></td>
            `;
        });
    }

    function shlyejLajmin(id) {
        if(confirm("A jeni i sigurt?")) {
            let arkiva = JSON.parse(localStorage.getItem('lajmetDrenas')) || [];
            arkiva = arkiva.filter(l => l.id !== id);
            localStorage.setItem('lajmetDrenas', JSON.stringify(arkiva));
            shfaqLajmet();
        }
    }

    function searchFunction() {
        let filter = document.getElementById('searchInput').value.toLowerCase();
        let rreshtat = document.getElementById('listaLajmeve').getElementsByTagName('tr');
        for (let i = 0; i < rreshtat.length; i++) {
            let titulli = rreshtat[i].getElementsByTagName('td')[1].innerText.toLowerCase();
            rreshtat[i].style.display = titulli.includes(filter) ? "" : "none";
        }
    }
</script>

</body>
</html>
