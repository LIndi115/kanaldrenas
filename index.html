<!DOCTYPE html>
<html lang="sq">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DRENICA SOT | Lajmet e fundit</title>
    <style>
        /* DIZAJNI PROFESIONAL (I ZI DHE I KUQ) - SI NE FOTO */
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background-color: #000; color: white; }
        
        header { background-color: #000; padding: 25px; text-align: left; border-bottom: 5px solid #d32f2f; }
        .logo { font-size: 38px; font-weight: bold; letter-spacing: -1px; text-transform: uppercase; }
        .logo span { color: #d32f2f; }

        /* TRAKA E KUQE E LAJMEVE (TICKER) */
        .news-ticker { background: #d32f2f; color: black; padding: 12px; font-weight: bold; font-size: 14px; text-transform: uppercase; overflow: hidden; white-space: nowrap; }

        .container { max-width: 1200px; margin: 30px auto; padding: 0 20px; }

        /* GRID-I QE I RRESHTON LAJMET BUKUR */
        #lajmet-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); 
            gap: 25px; 
        }

        .lajmi-card { 
            background: #111; 
            border-radius: 15px; 
            overflow: hidden; 
            border: 1px solid #222;
            transition: 0.4s;
            display: flex;
            flex-direction: column;
        }

        .lajmi-card:hover { transform: translateY(-5px); border-color: #d32f2f; }

        .lajmi-imazh { 
            width: 100%; 
            height: 220px; 
            object-fit: cover; /* E mbron foton te mos shtremberohet */
            filter: brightness(0.9);
        }

        .lajmi-content { padding: 20px; }
        .tag { background: #d32f2f; color: white; padding: 4px 10px; font-size: 11px; font-weight: bold; text-transform: uppercase; border-radius: 3px; margin-bottom: 12px; display: inline-block; }
        .lajmi-content h2 { margin: 0 0 10px; font-size: 20px; color: #fff; line-height: 1.4; }
        .lajmi-content p { color: #bbb; font-size: 15px; line-height: 1.6; margin: 0; }

        .loader { text-align: center; padding: 60px; font-size: 22px; color: #d32f2f; font-weight: bold; }
    </style>
</head>
<body>

    <header>
        <div class="logo">DRENICA<span>SOT</span></div>
    </header>

    <div class="news-ticker">
        Lajmet e fundit: Mirësevini në platformën e re informative të Drenicës!
    </div>

    <div class="container">
        <div id="lajmet-grid">
            <div class="loader">Duke kërkuar lajmet e fundit...</div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBh_7BwfNbKbscPSW1ZN9Y_UvAntsjl9Wg",
            authDomain: "herolind-6ca5f.firebaseapp.com",
            databaseURL: "https://herolind-6ca5f-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "herolind-6ca5f",
            storageBucket: "herolind-6ca5f.firebasestorage.app",
            messagingSenderId: "893085364638",
            appId: "1:893085364638:web:2db59e6ec72ad7e7c1a68f"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const lajmetRef = ref(db, 'lajme');
        const grid = document.getElementById('lajmet-grid');

        onValue(lajmetRef, (snapshot) => {
            const data = snapshot.val();
            grid.innerHTML = ''; // Pastron loader-in

            if (data) {
                // I rreshton lajmet e reja te parat
                Object.keys(data).reverse().forEach(key => {
                    const l = data[key];
                    // Nese nuk ke vendosur foto, perdoret nje imazh placeholder i zi
                    const foto = l.fotoUrl || "https://via.placeholder.com/600x400/111/d32f2f?text=Drenica+Sot";
                    
                    grid.innerHTML += `
                        <div class="lajmi-card">
                            <img src="${foto}" class="lajmi-imazh" alt="Lajmi">
                            <div class="lajmi-content">
                                <span class="tag">Kryesore</span>
                                <h2>${l.titulli}</h2>
                                <p>${l.pershkrimi}</p>
                            </div>
                        </div>
                    `;
                });
            } else {
                grid.innerHTML = '<p style="text-align:center; width: 100%;">Nuk ka lajme live për momentin. Shko te Paneli Admin për të postuar.</p>';
            }
        });
    </script>
</body>
</html>